<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>文件上传及读取</title>
	</head>
	<script type="text/javascript">
		var arr = new Array();
		var temp_str ="";
		function showPreview(source){
			var input = source;
			var reader = new FileReader();
			reader.readAsText(input.files[0]);
			reader.onload = function() {
				if(reader.result) {
			   //显示文件内容
					temp_str = reader.result;
				}
			};
		}
		function getDname()
		{
			if(temp_str=="")
			{
				alert("请先上传文件");
			}
			else
			{
				var temp = Math.random()*arr.length;
				arr = temp_str.split(" ");
				document.getElementById("text").value=arr[Math.floor(temp)];
			}
		}
	</script>
	<body>
		<div id="div" style="width: 300px;height: 300px; background-color: #FDEF85; margin: auto;">
			<br>
			<input type="file" name="file" value="上传文件" onchange="showPreview(this)" />
			<br>
			<br>
			<br>
			<br>
            <textarea   id="text"  disabled="false"  cols="40" rows="10" type="text"  disabled="false"></textarea>
			<br>
			<br>
			<input type="button" value="读取内容" onclick="getDname()">
		</div>
	</body>
</html>
